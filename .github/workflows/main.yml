      - name: Confirm install.sh exists
        run: ls -la devsecops-terraform/

      - name: Copy install.sh to EC2
        uses: appleboy/scp-action@v0.1.5
        with:
          host: ${{ steps.tf_output.outputs.EC2_IP }}
          username: ubuntu
          key: ${{ steps.tf_output.outputs.private_key_pem }}
          source: devsecops-terraform/install.sh
          target: ~/

      - name: SSH into EC2 and Setup Services
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ steps.tf_output.outputs.EC2_IP }}
          username: ubuntu
          key: ${{ steps.tf_output.outputs.private_key_pem }}
          script: |
            chmod +x install.sh
            ./install.sh
